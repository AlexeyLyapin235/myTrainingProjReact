{"version":3,"sources":["tocartsTools.js"],"names":["_reactRedux","require","_","_firestore","useTocartTools","getTocarts","setUrl","setName","setPrice","tocart","price","name","count","useDispatch","id","basket","url","findElem","adminToolAddTocart","findIndex","dispatch","addTocartBasket","addCount","keyCollection","regeneratorRuntime","async","_context","prev","next","Date","now","awrap","setDoc","doc","db","concat","comment","stop","removeTocart","adminAddTocart","q","_context2","query","collection","getDocs","sent","forEach","data","deleteTocartHome","deleteDoc"],"mappings":"wHAAA,IAAAA,YAAAC,QAAA,eAEAC,EAAAD,QAAA,MACAE,WAAAF,QAAA,sBASaG,eAAiB,SAAvBC,EASLC,EANAC,EAOAC,EACEC,EACEC,EACAC,GAEAC,IAAAA,GAJa,EAAAZ,YAAAa,eAuBbP,MAAAA,CAlBAQ,SAAAA,EAAAA,EAAAA,EAAAA,GALa,IAAfC,EAAA,CAOAL,MAAAA,EAAkCC,KAAAA,EAAlCK,IAAAA,EACAC,MAAQ,EATVH,GAAAA,GAcMI,EAAAA,EAAqBC,UAArBD,SAAAA,GAAAA,OAAAA,EAAAA,KAA4BF,EAAKL,KAAZS,GAAA,IAAAH,EAAAI,EAAAN,GAAAO,EAAAL,KACrB,SAAeP,EAAKC,EADCD,GACrB,IAAAa,EAAA,OAAAC,mBAAAC,MAAA,SAAAC,GAAA,OAAA,OAAAA,EAAAC,KAAAD,EAAAE,MAAA,KAAA,EAAA,GADqBZ,GAAAL,GAAA,KAAAD,EACrB,OADqBa,EAAAM,KAAAC,MACrBJ,EAAAE,KAAA,EAAAJ,mBAAAO,OADqB,EAAA5B,WAAA6B,SAAA,EAAA7B,WAAA8B,KAAAC,EAAAA,GAAA,OAAA,GAAAC,OAAAZ,IAAA,CAIrBP,IAAKA,EAFDO,MAAAA,EAFiBb,MAAAA,EAAAI,GAAAS,EAIrBP,QAAG,MAHHU,EAAAE,KAAA,EAAA,MAAA,KAAA,EAKAlB,EAAAA,IACAI,EAAAA,IACAsB,EAAAA,IALgD/B,IAFhD,KAAA,EAAA,IAAA,MAAA,OAAAqB,EAAAW,mDAYFhC,IAAAA,cAAU,SAAAiC,EAAAC,GAba,SAAAlC,IAAA,IAAAmC,EAAA,OAAAhB,mBAAAC,MAAA,SAAAgB,GAAA,OAAA,OAAAA,EAAAd,KAAAc,EAAAb,MAAA,KAAA,EAAA,OAAAR,EAAAkB,EAAA,KAAAE,GAAA,EAAArC,WAAAuC,QAAA,EAAAvC,WAAAwC,YAAAT,EAAAA,GAAA,SAAAO,EAAAb,KAAA,EAAAJ,mBAAAO,OAAA,EAAA5B,WAAAyC,SAAAJ,IAAA,KAAA,EAAAC,EAAAI,KAAAC,QAAA,SAAAb,GAAAb,EAAAmB,EAAAN,EAAAc,WAAA,KAAA,EAAA,IAAA,MAAA,OAAAN,EAAAJ,UAoB3B,IAAMjB,GAAW,EAAApB,YAAAa,eAajB,MAAO,CAAER,WAAAA,EAAY2C,iBAjBF9B,SAAAA,GAAAA,OAAAA,mBAAAA,MAAAA,SAAAA,GAAAA,OAAAA,OAAAA,EAAAA,KAAAA,EAAAA,MAAAA,KAAAA,EAAAA,OAAAA,EAAAA,KAAAA,EAAAA,mBAAAA,OAxCd,EAAAf,WAAA8C,YAAA,EAAA9C,WAAA8B,KAAAC,EAAAA,GAAA,OAAA,GAAAC,OAAArB,MAwCcI,KAAAA,EAejBb,IAfiBa,KAAAA,EAAAA,IAAAA,MAAAA,OAAAA,EAAAA","file":"tocartsTools.min.js","sourcesContent":["import { useDispatch } from \"react-redux\";\r\n\r\nimport { db } from \"..\";\r\nimport {\r\n  collection,\r\n  query,\r\n  getDocs,\r\n  deleteDoc,\r\n  setDoc,\r\n  doc,\r\n} from \"firebase/firestore\";\r\n\r\nexport const useTocartTools = (\r\n  getTocarts,\r\n  setUrl,\r\n  setName,\r\n  setPrice,\r\n  tocart,\r\n  addTocartBasket,\r\n  addCount\r\n) => {\r\n  const dispatch = useDispatch();\r\n  const addTocart = (price, name, url, id) => {\r\n    const basket = {\r\n      price,\r\n      name,\r\n      url,\r\n      count: 1,\r\n      id,\r\n    };\r\n    const findElem = tocart.findIndex((el) => el.id === basket.id);\r\n    findElem === -1\r\n      ? dispatch(addTocartBasket(basket))\r\n      : dispatch(addCount(findElem));\r\n  };\r\n \r\n  const adminToolAddTocart = async (url, name, price) => {\r\n    if (url && name && price !== \"\") {\r\n      const keyCollection = Date.now();\r\n      await setDoc(doc(db, \"test\", `${keyCollection}`), {\r\n        url: url,\r\n        title: name,\r\n        price: price,\r\n        id: keyCollection,\r\n        comment: [],\r\n      });\r\n      setUrl(\"\");\r\n      setName(\"\");\r\n      setPrice(\"\");\r\n      getTocarts();\r\n    }\r\n  };\r\n  return [addTocart, adminToolAddTocart];\r\n};\r\n\r\nexport const useGetTocarts = (removeTocart, adminAddTocart) => {\r\n  const dispatch = useDispatch();\r\n  const getTocarts = async () => {\r\n    dispatch(removeTocart([]));\r\n    const q = query(collection(db, \"test\"));\r\n    const querySnapshot = await getDocs(q);\r\n    querySnapshot.forEach((doc) => {\r\n      dispatch(adminAddTocart(doc.data()));\r\n    });\r\n  };\r\n  const deleteTocartHome = async (id) => {\r\n    await deleteDoc(doc(db, \"test\", `${id}`));\r\n    getTocarts();\r\n  };\r\n  return { getTocarts, deleteTocartHome };\r\n};\r\n"]}